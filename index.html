<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cashier Tools</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 15px;
            margin: 0;
            background-color: #1c1c1c;
            color: #e0e0e0;
            transition: background-color 0.3s, color 0.3s;
        }

        body.dark-mode {
            background-color: #1c1c1c;
            color: #e0e0e0;
        }

        .category-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        #suggestions {
    border: 1px solid #ccc;
    max-height: 150px;
    overflow-y: auto;
    background-color: white;
    position: absolute;
    width: 100%;
    z-index: 10;
}

.contact-info {
    font-size: 1rem; /* Â≠ó‰ΩìÂ§ßÂ∞è */
    font-style: italic; /* Êñú‰Ωì */
    color: #555; /* ÊµÖÁÅ∞Ëâ≤Â≠ó‰Ωì */
    text-align: center; /* Â±Ö‰∏≠ÂØπÈΩê */
    background-color: #f9f9f9; /* ÊüîÂíåÁöÑËÉåÊôØËâ≤ */
    padding: 10px; /* ÂÜÖËæπË∑ù */
    border-radius: 8px; /* ÂúÜËßíËæπÊ°Ü */
    margin-bottom: 20px; /* ‰∏é‰∏ãÊñπÂÜÖÂÆπÁöÑÈó¥Ë∑ù */
    border: 1px solid #ddd; /* ÊµÖËâ≤ËæπÊ°Ü */
}


#suggestions div {
    padding: 8px;
    cursor: pointer;
    color: #333;
}

#suggestions div:hover {
    background-color: #f0f0f0;
}
#productList div {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        #productList label {
            flex-grow: 1;
            margin-right: 10px;
        }
        

        #suggestions {
            border: 1px solid #ccc;
            max-height: 150px;
            overflow-y: auto;
            background-color: white;
            position: absolute;
            width: 170px;
            z-index: 10;
        }

        #suggestions div {
            padding: 8px;
            cursor: pointer;
            color: #333;
        }

        #suggestions div:hover {
            background-color: #f0f0f0;
        }

        input[type="number"] {
            width: 80px;
            margin-left: 10px;
            text-align: right;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 110px;
        }

        #result {
            width: 100%;
            height: 250px;
            border: 1px solid #ccc;
            padding: 10px;
            margin-top: 10px;
            white-space: pre-wrap;
            overflow: auto;
            font-size: 1.1rem;
            color: black;
            background-color: #fff;
            border-radius: 8px;
        }

        .button-container {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .action-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
        }
        

       button {
    padding: 5px 10px;
    font-size: 1rem;
    margin: 0 5px;
    cursor: pointer;
}

span {
    font-size: 1.2rem;
}


        .toggle-mode-btn {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            margin-bottom: 20px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
        }

        .saved-button {
            background-color: #007bff;
        }

        #searchBar {
            width: 150px;
            padding: 10px;
            margin-bottom: 20px;
            border-radius: 5px;
            border: 1px solid #ccc;
            font-size: 1.1rem;
        }

        .payment-section {
            margin: 20px 0;
            padding: 15px;
            border-radius: 8px;
            background-color: #2c2c2c;
        }

        .payment-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .payment-option {
            padding: 15px 10px;
            border-radius: 8px;
            background-color: #3c3c3c;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 60px;
        }

        .payment-option span {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
        }

        .payment-option span i {
            font-size: 1.5rem;
        }

        .payment-option:hover {
            background-color: #4c4c4c;
            transform: translateY(-2px);
        }

        .payment-option.selected {
            background-color: #007bff;
            color: white;
        }

        /* Ê∑ªÂä†ÂìçÂ∫îÂºèËÆæËÆ° */
        @media screen and (max-width: 600px) {
            .payment-options {
                grid-template-columns: repeat(3, 1fr);
            }

            .payment-option {
                padding: 10px 5px;
                min-height: 50px;
            }

            .payment-option span {
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>

    <div class="header">
        <h1>Sales Listing</h1>
    </div>

    <div class="search-container">
        <input type="text" id="searchBar" placeholder="Search for items..." onfocus="this.value=''" onkeyup="searchItems()">
        <div id="suggestions"></div>
    </div>

    <h3>Category</h3>
    <div class="category-container" id="categoryContainer"></div>

    <div id="productList"></div>

    <div class="payment-section">
        <h3>Payment Method</h3>
        <div class="payment-options">
            <label class="payment-option">
                <input type="radio" name="store" value="*Cash*" onclick="toggleCashInput(); updateResult(); selectPayment(this)">
                <span>
                    üíµ<br>
                    Cash
                </span>
            </label>
            <label class="payment-option">
                <input type="radio" name="store" value="*Card*" onclick="hideCashInput(); updateResult(); selectPayment(this)">
                <span>
                    üí≥<br>
                    Card
                </span>
            </label>
            <label class="payment-option">
                <input type="radio" name="store" value="*E-Wallet*" onclick="hideCashInput(); updateResult(); selectPayment(this)">
                <span>
                    üì±<br>
                    E-wallet
                </span>
            </label>
        </div>
    </div>

    <div class="action-buttons">
        <button onclick="clearAll()">Next Customers</button>
        <div id="cashInputContainer" style="display: none;">
            <input type="number" id="cashAmount" placeholder="Enter cash amount" 
                   style="background-color: white; color: black; padding: 5px;"
                   oninput="calculateChange()">
            <div id="changeAmount" style="color: #e0e0e0; margin-left: 10px; display: inline-block;"></div>
        </div>
    </div>

    <div id="result"></div>

    <div class="button-container">
        <button onclick="saveToStorage(1)">Save 1</button>
        <button onclick="saveToStorage(2)">Save 2</button>
        <button onclick="saveToStorage(3)">Save 3</button>
        <button onclick="saveToStorage(4)">Save 4</button>
    </div>
    <div class="button-container">
        <button onclick="viewStorage(1)">View 1</button>
        <button onclick="viewStorage(2)">View 2</button>
        <button onclick="viewStorage(3)">View 3</button>
        <button onclick="viewStorage(4)">View 4</button>
    </div>
    <button onclick="clearAllStorage()">Clear All</button>

<script>
    // ÂàÜÁ±ªÂïÜÂìÅ
    const categories = {
        BanHeang: [
            { id: 1, name: "Tambun Original", price: 17.90 },
            { id: 2, name: "Tambun Pandan", price: 17.90 },
            { id: 3, name: "Tambun White Lotus", price: 20.80 },
            { id: 4, name: "Tau Sar Pheah", price: 16.80 },
            { id: 5, name: "Heong Pheah", price: 16.80 },
            { id: 6, name: "Beh Teh Saw", price: 16.80 },
            { id: 7, name: "Phong Pheah", price: 16.80 },
            { id: 8, name: "Pepper Biscuit", price: 0 },
            { id: 9, name: "Hup Toh Soh", price: 16.80 },
            { id: 10, name: "Omlette Crisp Chocolate", price: 19.80 },
            { id: 11, name: "Omlette Crisp Pandan", price: 19.80 },
            { id: 12, name: "Kai Chai Biscuit", price: 14.80 },
            { id: 13, name: "Almond Slice", price: 0 },
            { id: 14, name: "Almond Slice Salted Egg", price: 0 },
            { id: 15, name: "Durian Crisp", price: 17.80 },
            { id: 16, name: "Coconut Crisp", price: 17.80 },
            { id: 17, name: "Salted Fish Crisp", price: 17.80 },
            { id: 18, name: "Salted Egg Crisp", price: 17.80 },
            { id: 19, name: "Cheese Crisp", price: 17.80 },
            { id: 20, name: "Chic Kut Teh", price: 18 },
            { id: 21, name: "Ginger Slice", price: 19.80 },
            { id: 26, name: "BH Dried Mango", price: 24.80 },
            { id: 27, name: "Kacang Tumbuk", price: 8.90 },
            { id: 28, name: "Gula Kacang", price: 8.90 },
            { id: 29, name: "Black Sesame Peanut", price: 13.80 },
            { id: 30, name: "Shat Kek Ma", price: 21.80 },
            { id: 31, name: "Shat Kek Ma (Brown Sugar)", price: 21.80 },
            { id: 32, name: "Coconut Biscuits (Beg)", price: 17.80 },
            { id: 33, name: "BH Freeze Dried Durian", price: 26.80 },
            { id: 34, name: "BH Freeze Dried Mango", price: 26.80 },
            { id: 36, name: "Butter Cookies", price: 16.80 },
            { id: 37, name: "Chocolate Cookies", price: 16.80 },
            { id: 38, name: "Raisin Cookies", price: 16.80 },
            { id: 39, name: "Almond Cookies", price: 16.80 },
            { id: 40, name: "Pineapple Tart", price: 0 },
            { id: 41, name: "Red Bean Mochi", price: 18.70 },
            { id: 42, name: "Peanut Mochi", price: 18.70 },
            { id: 43, name: "Green Tea Mochi", price: 18.70 },
            { id: 44, name: "Durian Mochi", price: 18.70 },
            { id: 45, name: "Yam Mochi", price: 18.70 },
            { id: 46, name: "Mochi Milk Yam Filling", price: 18.70 },
            { id: 47, name: "Mochi Milk Mango Filling", price: 18.70 },
            { id: 48, name: "Mochi Milk Green Tea", price: 18.70 },
            { id: 52, name: "Fillet Cracker With Anchovy", price: 14.60 },
            { id: 53, name: "Fillet Cracker With Seaweed", price: 14.60 },
            { id: 54, name: "Sakura Shrimp", price: 14.60 },
            { id: 60, name: "Frugurt Yogurt Blueberry", price: 24.80 },
            { id: 61, name: "Frugurt Yogurt Peach", price: 24.80 },
            { id: 62, name: "Frugurt Yogurt Mango", price: 24.80 },
            { id: 63, name: "Durian Pudding", price: 24.80 },
            { id: 64, name: "Coconut Pudding", price: 24.80 },
            { id: 65, name: "BH Dodol Durian", price: 0 },
            { id: 66, name: "BH Dodol Coconut", price: 0 },
            { id: 67, name: "BH Dodol Pandan", price: 0 },
            { id: 68, name: "Durian Beh Teh Saw", price: 28.90 },
        ],
        HopHup: [
            { id: 70, name: "Musang King Tart", price: 19 },
            { id: 71, name: "Mango Tart", price: 19 },
            { id: 72, name: "Durian Wafer Roll", price: 23.80 },
            { id: 73, name: "Omelette Durian", price: 25.80 },
            { id: 76, name: "HT Coconut Ori Cookies", price: 14.80 },
            { id: 77, name: "HT Coconut Pandan Cookies", price: 14.80 },
            { id: 78, name: "HT Dodol Kopi", price: 21.80 },
            { id: 79, name: "HT Dodol Durian", price: 21.80 },
            { id: 80, name: "HT Freeze Dried Mango", price: 26.80 },
            { id: 81, name: "HT Freeze Dried Durian", price: 26.80 },
            { id: 82, name: "Salted Egg Fish Skin", price: 30 },
            { id: 83, name: "Salted Egg Fish Skin Spicy", price: 30 },
            { id: 84, name: "Salted Egg Salmon Skin", price: 30 },
            { id: 94, name: "HT Musang King Durian Candy", price: 21.80 },
            { id: 126, name: "HT Dried Fruit Mango ", price: 24.80 }
        ],
        Chocolate: [
            { id: 108, name: "AD Chocolate Durian", unit: 'pc', price: 39 },
            { id: 109, name: "AD Chocolate Sabah Tea", unit: 'pc', price: 39 },
            { id: 110, name: "AD Chocolate Mango", unit: 'pc', price: 39 },
            { id: 111, name: "AD Chocolate Chili", unit: 'pc', price: 39 },
            { id: 112, name: "AD Chocolate Dark", unit: 'pc', price: 39 },
            { id: 113, name: "AD Chocolate Coffee", unit: 'pc', price: 39 },
            { id: 114, name: "AD Chocolate Banana", unit: 'pc', price: 39 },
            { id: 115, name: "AD Chocolate Tiramisu", unit: 'pc', price: 39 },
            { id: 116, name: "AD Chocolate Mint", unit: 'pc', price: 39 },
            { id: 117, name: "AD Chocolate Rambutan", unit: 'pc', price: 39 },
            { id: 118, name: "AD Chocolate Soursup", unit: 'pc', price: 39 }
        ],
        Sotong: [
            { id: 85, name: "Cuttlefish Red", price: 21.50 },
            { id: 86, name: "Cuttlefish Lemon", price: 21.50 },
            { id: 87, name: "Cuttlefish Honey", price: 21.50 },
            { id: 88, name: "Cuttlefish Floss Original", price: 21.50 },
            { id: 89, name: "Cuttlefish Massive", price: 21.50 },
            { id: 90, name: "Cuttlefish Whole", price: 21.50 },
            { id: 91, name: "Cuttlefish Roasted", price: 21.50 },
            { id: 92, name: "Cuttlefish Chili", price: 21.50 },
            { id: 93, name: "Five Star Cuttlefish", price: 34.00 },
            { id: 49, name: "BH Sotong Cuttlefish", price: 14.60 },
            { id: 50, name: "BH Gula Cuttlefish", price: 14.60 },
            { id: 51, name: "BH Satay Fish", price: 14.60 }
         ],
        Coffee: [
            { id: 22, name: "BH W/Coffee(Mini)", price: 25.80 },
            { id: 23, name: "BH W/Coffee(Mini)No Sugar", price: 25.80 },
            { id: 25, name: "BH Durian W/Coffee(Mini)", price: 25.80 },
            { id: 24, name: "BH Teh Tarik(Mini)", price: 25.80 },
            { id: 55, name: "BH W/Coffee", price: 29.50 },
            { id: 119, name: "BH W/Coffee No Sugar", price: 29.50 },
            { id: 58, name: "BH Teh Tarik", price: 29.50 },
            { id: 59, name: "BH Durian White Coffee", price: 29.50 },
            { id: 99, name: "Kopi Tenom Silver", price: 11.70 },
            { id: 100, name: "Kopi Tenom Gold", price: 12.70 },
            { id: 101, name: "Kopi Tenom Blue", price: 14.80 },
            { id: 102, name: "Kopi Tenom Green", price: 14.30 },
            { id: 125, name: "Kopi Tenom Red ", price: 15.60 }
        ],
        Amplang: [
            { id: 96, name: "Amplang Ikan", price: 12 },
            { id: 97, name: "Amplang Udang", price: 12 },
            { id: 98, name: "Amplang Sotong", price: 12 },
            { id: 143, name: "kuih Cincin", price: 12 },
            { id: 144, name: "Kuih Cincin (Mini)", price: 18 }
                        
        ],
        SabahTea: [
            { id: 127, name: "Sabah Tea (S)", price: 7.50 },
            { id: 128, name: "Sabah Tea (B)", price: 14 },
            { id: 129, name: "Sabah Tea Box", price: 40 },
            { id: 130, name: "Sabah Tea Gift Box", price: 96 },
            { id: 131, name: "Sabah Tea Agarwood", price: 15.80 },
            { id: 132, name: "Sabah Tea Cinnamon", price: 15.80 },
            { id: 133, name: "Sabah Tea Ginger", price: 15.80 },
            { id: 134, name: "Sabah Tea Misai Kuching", price: 15.80 },
            { id: 135, name: "Sabah Tea Tongat Ali", price: 15.80 },
            { id: 136, name: "Sabah Tea Geranium", price: 15.80 },
            { id: 137, name: "Sabah Tea Lemon Grass", price: 15.80 },
            { id: 138, name: "Sabah Tea Pandan", price: 15.80 },
            { id: 139, name: "Sabah Tea Geranium", price: 15.80 },
            { id: 140, name: "Sabah Tea Organic", price: 20 },
            { id: 141, name: "Sabah Tea Wooden box (B)", price: 65 },
            { id: 142, name: "Sabah Tea Wooden box (S)", price: 47.70 },
                        
        ],
        Other: [
            { id: 106, name: "Fruity Gummy Assorted", price: 8.50 },
            { id: 124, name: "Fruity Gummy Mango", price: 8.50 },
            { id: 69, name: "Durian Kuih", price: 33 },
            { id: 120, name: "Anchovy Blue", price: 28.80 },
            { id: 121, name: "Anchovy Green", price: 28.80 },
            { id: 122, name: "Anchovy Red", price: 19.80 },
            { id: 123, name: "Anchovy Yellow", price: 19.80 },
            { id: 145, name: "Bird Nest", price: 0, customPrice: true },
            { id: 146, name: "Fish Maw", price: 0, customPrice: true },
            { id: 147, name: "Sea Cucumber", price: 0, customPrice: true }
        ]
    };

    let selectedItems = {};

    window.onload = function() {
        // ÂàùÂßãÂåñÂàÜÁ±ªÈÄâÊã©
        const categoryContainer = document.getElementById('categoryContainer');
        for (let category in categories) {
            const label = document.createElement('label');
            label.innerHTML = `<input type="radio" name="category" value="${category}" onclick="showCategory()">${category}`;
            categoryContainer.appendChild(label);
        }
    };

function loadProducts(products) {
    const productList = document.getElementById('productList');
    productList.innerHTML = '';

    products.forEach(product => {
        const div = document.createElement('div');
        if (product.customPrice) {
            if (["Bird Nest", "Fish Maw", "Sea Cucumber"].includes(product.name)) {
                // ‰∏∫ Bird Nest„ÄÅFish Maw Âíå Sea Cucumber Ê∑ªÂä† Add ÊåâÈíÆ
                div.innerHTML = `
                    <label>${product.name}</label>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <input type="number" 
                               id="price${product.id}" 
                               placeholder="Enter price" 
                               style="width: 100px; padding: 5px; background-color: white; color: black;"
                               step="0.10">
                        <button onclick="addCustomItem(${product.id}, '${product.name}')">Add</button>
                    </div>
                `;
            } else {
                div.innerHTML = `
                    <input type="checkbox" id="item${product.id}" onchange="saveCustomItem(${product.id}, '${product.name}')">
                    <label for="item${product.id}">${product.name}</label>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <input type="number" 
                               id="price${product.id}" 
                               placeholder="Enter price" 
                               style="width: 100px; padding: 5px; background-color: white; color: black;"
                               onchange="updateCustomPrice(${product.id})"
                               step="0.10">
                        <button onclick="decreaseQuantity(${product.id})">-</button>
                        <span id="quantityDisplay${product.id}" style="padding: 0 10px;">1</span>
                        <button onclick="increaseQuantity(${product.id})">+</button>
                    </div>
                `;
            }
        } else {
            div.innerHTML = `
                <input type="checkbox" id="item${product.id}" onchange="saveItem(${product.id}, '${product.name}', ${product.price})">
                <label for="item${product.id}">${product.name} - RM${product.price.toFixed(2)}</label>
                <div style="display: flex; align-items: center;">
                    <button onclick="decreaseQuantity(${product.id})">-</button>
                    <span id="quantityDisplay${product.id}" style="padding: 0 10px;">1</span>
                    <button onclick="increaseQuantity(${product.id})">+</button>
                </div>
            `;
        }
        productList.appendChild(div);
    });
}
function increaseQuantity(id) {
    const quantityDisplay = document.getElementById(`quantityDisplay${id}`);
    let currentQuantity = parseInt(quantityDisplay.textContent);
    currentQuantity++;
    quantityDisplay.textContent = currentQuantity;
    saveQuantity(id, currentQuantity);  // Êõ¥Êñ∞ÈÄâ‰∏≠ÁöÑÂïÜÂìÅÊï∞Èáè
    updateResult();
}

function decreaseQuantity(id) {
    const quantityDisplay = document.getElementById(`quantityDisplay${id}`);
    let currentQuantity = parseInt(quantityDisplay.textContent);
    if (currentQuantity > 1) {  // Á°Æ‰øùÊï∞Èáè‰∏çÂ∞è‰∫é 1
        currentQuantity--;
        quantityDisplay.textContent = currentQuantity;
        saveQuantity(id, currentQuantity);  // Êõ¥Êñ∞ÈÄâ‰∏≠ÁöÑÂïÜÂìÅÊï∞Èáè
        updateResult();
    }
}

function searchItems() {
    const searchTerm = document.getElementById('searchBar').value.toLowerCase();
    const allProducts = Object.values(categories).flat();
    const filteredProducts = allProducts.filter(product => product.name.toLowerCase().includes(searchTerm));
    
    // Ê∏ÖÁ©∫Âª∫ËÆÆÂàóË°®
    const suggestionsDiv = document.getElementById('suggestions');
    suggestionsDiv.innerHTML = '';
    
    // Â¶ÇÊûúÊêúÁ¥¢Ê†è‰∏∫Á©∫Ôºå‰∏çÊòæÁ§∫Âª∫ËÆÆ
    if (searchTerm === '') {
        return;
    }

    // ÊòæÁ§∫Âª∫ËÆÆÂàóË°®
    filteredProducts.forEach(product => {
        const suggestionItem = document.createElement('div');
        suggestionItem.textContent = product.name;
        suggestionItem.onclick = function() {
            document.getElementById('searchBar').value = product.name;
            suggestionsDiv.innerHTML = '';  // Ê∏ÖÁ©∫Âª∫ËÆÆÂàóË°®
            loadProducts([product]);  // ÊòæÁ§∫ÈÄâ‰∏≠ÁöÑ‰∫ßÂìÅ‰ø°ÊÅØ
        };
        suggestionsDiv.appendChild(suggestionItem);
    });
}

function saveItem(id, name, price) {
    const checkbox = document.getElementById('item' + id);
    const quantity = document.getElementById('quantityDisplay' + id).textContent || 1;

    if (checkbox.checked) {
        selectedItems[id] = { quantity: quantity, price: price };
    } else {
        delete selectedItems[id];
    }
    updateResult();
}

function saveQuantity(id, quantity) {
    if (selectedItems[id]) {
        selectedItems[id].quantity = quantity;
    }
}

function toggleItems() {
    let checkboxes = document.querySelectorAll('#productList input[type="checkbox"]');
    let quantities = document.querySelectorAll('#productList input[type="number"]');

    checkboxes.forEach(checkbox => checkbox.disabled = false);
    quantities.forEach(quantity => quantity.disabled = false);
}

function showCategory() {
    let selectedCategory = document.querySelector('input[name="category"]:checked');
    
    if (selectedCategory) {
        let categoryValue = selectedCategory.value;
        let productsToShow = categories[categoryValue];
        
        if (productsToShow) {
            loadProducts(productsToShow);
        } else {
            console.error("Ê≤°ÊúâÊâæÂà∞ËØ•ÂàÜÁ±ªÁöÑÂïÜÂìÅ");
        }
    } else {
        console.error("Ê≤°ÊúâÈÄâ‰∏≠‰ªª‰ΩïÂàÜÁ±ª");
    }

    toggleItems();
}

function calculateTotal() {
    let total = 0;
    for (const item of Object.values(selectedItems)) {
        total += item.quantity * item.price;
    }
    return total.toFixed(2);
}

function updateResult() {
    let result = '';
    let selectedStore = document.querySelector('input[name="store"]:checked');
    if (selectedStore) {
        result += 'Payment: ' + selectedStore.value + '\n\n';
    } else {
        result += 'Payment: No Select\n';
    }

    // ÊòæÁ§∫ÊâÄÊúâÂïÜÂìÅËÆ∞ÂΩï
    for (const [uniqueId, { name, quantity, price }] of Object.entries(selectedItems)) {
        result += `${name} - ${quantity} pc, RM${(quantity * price).toFixed(2)}\n`;
    }

    result += `\nTotal: RM${calculateTotal()}\n`;

    // Ê∑ªÂä†Áé∞ÈáëÂíåÊâæÈõ∂‰ø°ÊÅØ
    if (selectedStore && selectedStore.value === '*Cash*') {
        const cashAmount = parseFloat(document.getElementById('cashAmount').value) || 0;
        result += `Cash: RM${cashAmount.toFixed(2)}\n`;
        
        const total = parseFloat(calculateTotal());
        const change = cashAmount - total;
        
        if (!isNaN(change) && change >= 0) {
            result += `Change: RM${change.toFixed(2)}`;
        } else if (!isNaN(change) && change < 0) {
            result += `Insufficient amount`;
        }
    }

    // Êõ¥Êñ∞ `result` ÂÜÖÂÆπ
    document.getElementById('result').innerText = result;

    // Âä®ÊÄÅÊ∑ªÂä†Êó•ÊúüÂíåÊó∂Èó¥
    const now = new Date();
    const dateTimeString = `Date: ${now.toLocaleDateString()} Time: ${now.toLocaleTimeString()}`;

    // Ê£ÄÊü•ÊòØÂê¶Â∑≤ÊúâÊó•ÊúüÊó∂Èó¥ÂÖÉÁ¥†
    let dateTimeElement = document.getElementById('dateTime');
    if (!dateTimeElement) {
        // Â¶ÇÊûúÊ≤°ÊúâÔºåÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÂÖÉÁ¥†Âπ∂ÊèíÂÖ•Âà∞ result ‰∏ãÊñπ
        dateTimeElement = document.createElement('div');
        dateTimeElement.id = 'dateTime';
        dateTimeElement.style.marginTop = '10px';
        dateTimeElement.style.fontSize = '1.1rem';
        dateTimeElement.style.color = 'black'; // Á°Æ‰øùÊó•ÊúüÊó∂Èó¥ÂÜÖÂÆπÂèØËßÅ
        document.getElementById('result').insertAdjacentElement('afterend', dateTimeElement);
    }

    // Êõ¥Êñ∞Êó•ÊúüÂíåÊó∂Èó¥
    dateTimeElement.textContent = dateTimeString;
}

function saveToStorage(position) {
    const text = document.getElementById('result').innerText;
    localStorage.setItem('salesItemPosition' + position, text);
    alert('Data Saved ' + position);
    const saveButton = document.querySelector(`button[onclick="saveToStorage(${position})"]`);
    saveButton.classList.add('saved-button');
}

function viewStorage(position) {
    const storedText = localStorage.getItem('salesItemPosition' + position);
    if (storedText) {
        alert('Save ' + position + ' Data:\n' + storedText);
    } else {
        alert('Save ' + position + ' No Data');
    }
}

function clearAll() {
    selectedItems = {};
    document.getElementById('productList').innerHTML = '';
    document.getElementById('result').innerText = '';
    document.querySelectorAll('input[name="store"]').forEach(input => input.checked = false);
    document.querySelectorAll('input[name="category"]').forEach(input => input.checked = false);
    toggleItems();
}

function toggleDarkMode() {
    const isDarkModeEnabled = document.body.classList.toggle('dark-mode');
    const toggleButton = document.querySelector('.toggle-mode-btn');

    if (isDarkModeEnabled) {
        toggleButton.textContent = 'ÂàáÊç¢Ëá≥Ê≠£Â∏∏Ê®°Âºè';
        localStorage.setItem('dark-mode', 'enabled');
    } else {
        toggleButton.textContent = 'ÂàáÊç¢Ëá≥ÈªëÊöóÊ®°Âºè';
        localStorage.setItem('dark-mode', 'disabled');
    }
}

function clearAllStorage() {
    selectedItems = {};
    document.getElementById('productList').innerHTML = '';
    document.getElementById('result').innerText = '';
    document.querySelectorAll('input[name="store"]').forEach(input => input.checked = false);
    document.querySelectorAll('input[name="category"]').forEach(input => input.checked = false);
    toggleItems();
    // Ê∏ÖÈô§Êú¨Âú∞Â≠òÂÇ®ÂÜÖÂÆπÂπ∂Â§çÂéüÊåâÈíÆÈ¢úËâ≤
    for (let i = 1; i <= 5; i++) {
        localStorage.removeItem('salesItemPosition' + i);
        const saveButton = document.querySelector(`button[onclick="saveToStorage(${i})"]`);
        saveButton.classList.remove('saved-button');
    }
    alert('ÊâÄÊúâÂÜÖÂÆπÂ∑≤Ê∏ÖÁ©∫');
}

function toggleCashInput() {
    document.getElementById('cashInputContainer').style.display = 'block';
    calculateChange();
}

function hideCashInput() {
    document.getElementById('cashInputContainer').style.display = 'none';
    document.getElementById('changeAmount').textContent = '';
}

function calculateChange() {
    const cashAmount = parseFloat(document.getElementById('cashAmount').value) || 0;
    const total = parseFloat(calculateTotal());
    const change = cashAmount - total;
    
    if (!isNaN(change) && change >= 0) {
        document.getElementById('changeAmount').textContent = `Change: RM${change.toFixed(2)}`;
    } else if (!isNaN(change) && change < 0) {
        document.getElementById('changeAmount').textContent = `Insufficient amount`;
    } else {
        document.getElementById('changeAmount').textContent = '';
    }
    
    updateResult();
}

function selectPayment(radio) {
    // ÁßªÈô§ÊâÄÊúâÊîØ‰ªòÈÄâÈ°πÁöÑÈÄâ‰∏≠Ê†∑Âºè
    document.querySelectorAll('.payment-option').forEach(option => {
        option.classList.remove('selected');
    });
    
    // ‰∏∫ÈÄâ‰∏≠ÁöÑÊîØ‰ªòÈÄâÈ°πÊ∑ªÂä†Ê†∑Âºè
    if (radio.checked) {
        radio.closest('.payment-option').classList.add('selected');
    }
}

function saveCustomItem(id, name) {
    const checkbox = document.getElementById('item' + id);
    const priceInput = document.getElementById('price' + id);
    const quantity = document.getElementById('quantityDisplay' + id).textContent || 1;
    const price = parseFloat(priceInput.value) || 0;

    if (checkbox.checked) {
        if (price <= 0) {
            alert('Please enter a valid price');
            checkbox.checked = false;
            return;
        }
        selectedItems[id] = { quantity: quantity, price: price };
    } else {
        delete selectedItems[id];
    }
    updateResult();
}

function updateCustomPrice(id) {
    const checkbox = document.getElementById('item' + id);
    if (checkbox.checked) {
        saveCustomItem(id, '');
    }
}

// Ê∑ªÂä†‰∏ìÈó®Â§ÑÁêÜ Add ÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂ÁöÑÂáΩÊï∞
function addCustomItem(id, name) {
    const priceInput = document.getElementById('price' + id);
    const price = parseFloat(priceInput.value) || 0;

    if (price <= 0) {
        alert('Please enter a valid price');
        return;
    }

    // ÁîüÊàêÂîØ‰∏ÄÁöÑ IDÔºåÈÅøÂÖçÈáçÂ§ç
    const uniqueId = `${id}-${Date.now()}`;

    // Ê∑ªÂä†Âà∞ selectedItemsÔºåÁ°Æ‰øùÊØèÊ¨°ÈÉΩÊòØÊñ∞ËÆ∞ÂΩï
    selectedItems[uniqueId] = { name: name, quantity: 1, price: price };

    updateResult();
    alert(`${name} added successfully!`);
}

</script>
<p class="contact-info">If you have any questions or need to add new products, please contact me (Mark).</p>

</body>
</html>
